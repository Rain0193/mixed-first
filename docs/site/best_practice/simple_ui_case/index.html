<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>一个简单测试用例的自动化实例 - 自动化测试</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  

  
  <link rel="stylesheet" href="../../css/fonts.css" type="text/css" />

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "一个简单测试用例的自动化实例";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> 自动化测试</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">主页</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>QuickStart</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/project_structure/">项目结构和配置</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../steps/steps_configuration/">项目结构和配置－步骤</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../properties/properties_intro/">配置文件说明</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/selenium_in_a_wild_way/">WEB页面自动化-SELENIUM管理页面元素</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/webui_automation_quickstart/">WEB页面自动化-开始</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/webui_automation_realexample/">WEB页面自动化-真实用例</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api_automation/APIAutomation/">API 自动化测试</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api_automation/api_testing_qa/">API 自动化测试常见问题</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../activity_automation/activity_automation_defined_employees/">工作流测试之指定审批节点</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../activity_automation/activity_automation_dynamic/">工作流测试之动态审批节点</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>自动化测试模块介绍</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/automation-purpose/">目的</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../intro/automation-framework-impl/">基本模块的作用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/self_defined_elements/">页面自动化-页面元素的使用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/element_handler/">页面自动化-页面元素方法查询</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/pageobject_codegenerator/">页面自动化-页面代码生成</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../webui_automation/build_test/">页面自动化-WebTestActionBuilder</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>接口自动化测试</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api_automation/web接口测试/">接口测试－WEB接口常见的实现方法</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api_automation/APIAutomation/">API 自动化测试</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../api_automation/API自动化测试-进阶/">API自动化测试-进阶</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tips</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/WebTest_Debug/">WebUI Debug</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/find_by_ref/">FindByRef annotation  使用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../verification_annotation/">verification 注解使用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/jmeter_basic/">JMeter使用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../code_style/">JAVA 自动化测试代码规范</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">一个简单测试用例的自动化实例</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#test-case-to-ui-automation-case-a-simple-scenario-tour">Test Case To UI Automation Case - A Simple Scenario Tour</a></li>
                
                    <li><a class="toctree-l4" href="#-">需求具体化-测试用例设计</a></li>
                
                    <li><a class="toctree-l4" href="#-_1">实际测试用例 - 外部测试数据</a></li>
                
                    <li><a class="toctree-l4" href="#_1">构建自动化测试用例</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../database/Database/">数据库操作</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/testng-xml-configuration/">TestNG 测试XML配置</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/use_own_password/">使用自己的用户名和密码获取万能密码</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/JsonHelper/">JSON处理</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/page_object/">Page Object/Page Factory</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/TreeElement/">TreeElement 使用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/WebDriverHelper/">添加了Expectation的WebDriver操作</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/WebDriver操作/">WebDriver原生操作</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/how_to_write_teststeps/">编写测试步骤的不同方法</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/repeatable_elements/">重复填写控件使用</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/StateElementReferneceException/">StateElementReferneceException</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/DateHelper/">DateHelper</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/database_assetion/">数据库验证</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/database_update/">预设条件数据的更新和回滚</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/testng_faq/">TestNG测试常见问题</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/simplest_testngreport/">TestNG 定制报表简单原理</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/PageFactory/">Page Factory 模式原理</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/random_data/">随机数据</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/data_construct_by_context/">动态测试数据构建</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../tips/code_review_1/">代码检查-重复数据库访问</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Git</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../git/git_basic/">Git 基础</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">自动化测试</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tips &raquo;</li>
        
      
    
    <li>一个简单测试用例的自动化实例</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="test-case-to-ui-automation-case-a-simple-scenario-tour">Test Case To UI Automation Case - A Simple Scenario Tour</h1>
<p>下面这个例子就是讲述如何从需求到测试用例设计，然后实现UI自动化测试的过程.
这个例子来自一个小的需求：业主会员中心，业主提交自己的房源的介绍</p>
<h2 id="-">需求具体化-测试用例设计</h2>
<p>面对业主会员中心，业主提交自己的房源的介绍这样一个需求以及相关的文档，一般情况肯定先去了解这个需求的业务流程：</p>
<pre><code>  业主 -&gt; 自己房源 -&gt; 输入房源介绍标题 -&gt; 输入房源内容介绍  -&gt; 保存输入内容
</code></pre>

<p>从输入和输出的角度看：</p>
<ul>
<li>
<p>输入：</p>
<ul>
<li>指定房源</li>
<li>房源介绍的标题</li>
<li>房源介绍的详细描述</li>
</ul>
</li>
<li>
<p>输出：</p>
<ul>
<li>房源描述被保存成功，返回提示信息</li>
<li>房源描述没有通过验证，返回相关出错的信息</li>
</ul>
</li>
</ul>
<p>所有我们的测试用例的脑图可能是这样的:</p>
<p><img alt="img" src="../../pics/simple_testcase.png" /></p>
<p>由于最后在执行测试用例的时候，都会把这些抽象的输入输出描述都会转化为具体的值，那么实际上根据的测试用例是这样的：</p>
<table>
<thead>
<tr>
<th>输入-propertyId</th>
<th>输入-title</th>
<th>输入-content</th>
<th>输出-保存成功信息</th>
<th>输出- title验证失败信息</th>
<th>输出-content验证失败信息</th>
</tr>
</thead>
<tbody>
<tr>
<td>1234564</td>
<td>introduction</td>
<td>introduction</td>
<td>保存成功</td>
<td></td>
<td></td>
</tr>
<tr>
<td>1234564</td>
<td></td>
<td>introduction</td>
<td></td>
<td>标题不能为空</td>
<td></td>
</tr>
<tr>
<td>1234564</td>
<td>introduction</td>
<td></td>
<td></td>
<td></td>
<td>内容不能为空</td>
</tr>
</tbody>
</table>
<h2 id="-_1">实际测试用例 - 外部测试数据</h2>
<p>根据上面的测试用例，实际上在自动化测试数据准备里面就如下图：</p>
<p><img alt="img" src="../../pics/HouseIntroductionTestCases.jpg" /></p>
<p>我们比较一下这两个数据集合，其实基本上是类似的，所以遇到一些比较好表达为输入输出的情况的场景，可以在编写测试用例的时候也一起把自动化测试的数据也准备好了</p>
<h2 id="_1">构建自动化测试用例</h2>
<p>由于目前功能还没有实现，所以没法实现自动化测试，不过自动化测试代码其实可以先写起来了，可以先构建测试用例的脚本，在丰富业务流程，页面的代码, 如这个例子：</p>
<ul>
<li>构建测试用例代码：</li>
</ul>
<pre><code class="java">@DataProvider(name = &quot;ownercenter_data&quot;)
   public Iterator&lt;Object[]&gt; getTestData(Method m) throws Exception {
       Map&lt;String, Class&gt; clazzMap = new HashMap&lt;String, Class&gt;();
       clazzMap.put(&quot;TestData&quot;, OwnerCenterData.class);
       clazzMap.put(&quot;TestCase&quot;, TestDescription.class);
       clazzMap.put(&quot;ExpectedResult&quot;, ExpectedResultSpec.class);
       Iterator&lt;Object[]&gt; y = TestDescription.filterByMethod(&quot;testcase/flows/HouseIntroductionTestCases.xls&quot;, m, clazzMap);
       return y;
   }

   @Test(dataProvider = &quot;ownercenter_data&quot;)
   public void houseIntroduction(OwnerCenterData testData, TestDescription td, ExpectedResultSpec result) {

       VipOwnerCenterFlows.houseIntroduction(driver, testData);

       String alertMessage = DriverFactory.getThreadLevelTestContext().getAlertMessage();
       //todo 不知道具体的位置在什么地方
      //  String title = WebDriverHelper.findElement(driver, By.xpath(&quot;/html/body/ng-view/div/div[2]/section/p[2]&quot;)).getText();
      //  String content = WebDriverHelper.findElement(driver, By.xpath(&quot;/html/body/ng-view/div/div[2]/section/p[4]&quot;)).getText();

       String sql = &quot;select top(1) * from houseIntroduction order by updatedat desc&quot;;
       Map&lt;String, String&gt; expectedResult = testData.getAsMap(&quot;title&quot;, &quot;content&quot;);
       new SoftAssertion()
               .addTestResult(DriverFactory.getThreadLevelTestContext().getWebTestResult())
//                .assertDBValues(&quot;vip&quot;, sql, expectedResult)
               .assertThat(title, is(expectedResult.get(&quot;title&quot;)), &quot;检查标题&quot;)
               .assertThat(content, is(expectedResult.get(&quot;content&quot;)), &quot;检查内容&quot;)
               .assertThat(alertMessage, is(result.get(&quot;alertMessage&quot;)), &quot;检查弹出菜单按钮&quot;)
               .getFinalResult();
   }

   @Test(dataProvider = &quot;ownercenter_data&quot;)
   public void houseIntroduction_negtivecase(OwnerCenterData testData,
                                             TestDescription td, ExpectedResultSpec result) {

       VipOwnerCenterFlows.houseIntroduction(driver, testData);

       //不知道具体的位置在哪里
      //  WebElement titleAlert = CollectionsHelper.filter(
      //          WebDriverHelper.findElements(driver, By.xpath(&quot;//form[@name='describeForm']/div[1]/span&quot;)),
      //          webElement -&gt; {
      //              return webElement.isDisplayed();
      //          });
      //  WebElement contentAlert = CollectionsHelper.filter(WebDriverHelper.findElements(driver, By.xpath(&quot;//form[@name='describeForm']/div[2]/span&quot;)),
      //          webElement -&gt; {
      //              return webElement.isDisplayed();
      //          });


       SoftAssertion sa = new SoftAssertion();
       if (titleAlert != null) {
           sa.assertEquals(titleAlert.getText(), result.get(&quot;titleAlert&quot;), &quot;检查title的错误信息&quot;);
       } else {
           sa.assertTrue(StringHelper.isNoneContentString(result.get(&quot;titleAlert&quot;)), &quot;没有错误信息返回&quot;);
       }
       if (contentAlert != null) {
           sa.assertEquals(contentAlert.getText(), result.get(&quot;contentAlert&quot;), &quot;检查content错误信息&quot;);
       } else {
           sa.assertTrue(StringHelper.isNoneContentString(result.get(&quot;contentAlert&quot;)), &quot;没有错误信息返回&quot;);
       }
   }
</code></pre>

<ul>
<li>丰富业务流程代码：</li>
</ul>
<p>业务流程的代码，由于是根据以后代码和页面来组合的，所以在代码还没有完成的时候，大致也可以写出如下的业务流程</p>
<pre><code class="java">//输入“我来介绍我家”内容并提交
public static void houseIntroduction(WebDriver driver, TestData data) {
    goToindex(driver, data);
    goToHousePage(driver, data);
    WebTestActionBuilder.execute(Lists.newArrayList(MyHousePage.class, IntroductionPage.class)
            , &quot;houseIntroduction&quot;, driver, data);
}
</code></pre>

<ul>
<li>丰富页面流程</li>
</ul>
<p>等待页面完成之后，可以定义相应的页面元素定位，然后完善整个自动化测试代码，同时进行调试</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../database/Database/" class="btn btn-neutral float-right" title="数据库操作"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../code_style/" class="btn btn-neutral" title="JAVA 自动化测试代码规范"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../code_style/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../database/Database/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
